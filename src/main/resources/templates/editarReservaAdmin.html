<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Editar reserva</title>
    <link rel="icon" th:href="@{/img/favicon.ico}">
    <link rel="stylesheet" th:href="@{/css/registroAdmin.css}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="registro-container">
    <a th:href="@{/admin/reservas}" class="back-arrow">←</a>

    <h2>Editar reserva</h2>

    <form th:action="@{'/admin/reservas/editar/' + ${reserva.idReserva}}" method="post">

        <div class="field">
            <label for="inicio">Fecha y hora de inicio</label>
            <input id="inicio" name="inicio" type="datetime-local"
                   th:value="${#temporals.format(reserva.fechaHoraInicio, 'yyyy-MM-dd''T''HH:mm')}"
                   required>
        </div>

        <div class="field">
            <label for="fin">Fecha y hora de fin</label>
            <input id="fin" name="fin" type="datetime-local"
                   th:value="${#temporals.format(reserva.fechaHoraFin, 'yyyy-MM-dd''T''HH:mm')}"
                   required>
        </div>

        <div class="field">
            <label for="clienteId">Cliente</label>
            <select id="clienteId" name="clienteId" required>
                <option value="" disabled>Selecciona un cliente</option>
                <option th:each="c : ${clientes}"
                        th:value="${c.idCliente}"
                        th:text="${c.usuario.nombre + ' ' + c.usuario.apellidos}"
                        th:selected="${c.idCliente} == ${reserva.cliente.idCliente}">
                </option>
            </select>
        </div>

        <div class="field">
            <label for="entrenadorId">Entrenador</label>
            <select id="entrenadorId" name="entrenadorId" required>
                <option value="" disabled>Selecciona un entrenador</option>
                <option th:each="e : ${entrenadores}"
                        th:value="${e.idEntrenador}"
                        th:text="${e.usuario.nombre + ' ' + e.usuario.apellidos}"
                        th:selected="${e.idEntrenador} == ${reserva.entrenador.idEntrenador}">
                </option>
            </select>
        </div>

        <div class="field">
            <label for="actividadId">Actividad</label>
            <select id="actividadId" name="actividadId" required>
                <option value="" disabled>Selecciona una actividad</option>
                <option th:each="a : ${actividades}"
                        th:value="${a.idActividad}"
                        th:text="${a.nombre + ' (' + a.tipoActividad + ')'}"
                        th:selected="${a.idActividad} == ${reserva.actividad.idActividad}">
                </option>
            </select>
        </div>

        <div class="field">
            <label for="salaId">Sala</label>
            <select id="salaId" name="salaId" required>
                <option value="" disabled>Selecciona una sala</option>
                <option th:each="s : ${salas}"
                        th:value="${s.idSala}"
                        th:text="${s.nombre + ' - ' + s.ubicacion}"
                        th:selected="${s.idSala} == ${reserva.sala.idSala}">
                </option>
            </select>
        </div>

        <div class="field">
            <label for="estado">Estado</label>
            <select id="estado" name="estado" required>
                <option th:each="e : ${estados}"
                        th:value="${e}"
                        th:text="${e}"
                        th:selected="${e} == ${reserva.estado}">
                </option>
            </select>
        </div>

        <div class="field">
            <label for="comentarios">Comentarios</label>
            <textarea id="comentarios" name="comentarios"
                      th:text="${reserva.comentarios}"></textarea>
        </div>

        <div class="actions">
            <button class="btn" type="submit">Guardar cambios</button>
        </div>
    </form>

    <div class="footer-link">
        <a th:href="@{/admin/reservas}">← Volver a gestión de reservas</a>
    </div>
</div>
</body>
</html>
